dependencies:

  # user setup
  - name: root_user
  - name: users
  - name: fish

  # system setup
  - name: hostname
    when: ansible_connection != "lxc"
  - name: locales
  - name: timezone
  - name: keyboard_configuration

  # packages setup
  - name: debian_repos
  - name: debian_packages
  - name: system_upgrade

  # network setup
  # IDEA: merge netif and network_interfaces to role network
  - name: netif
  - name: network_interfaces
  - name: fastd
    when: ( netifs | json_query("*|[?type=='fastd']") | length ) > 0
  - name: babeld
    when: ( netifs | json_query("*|[?babeld==true]") | length ) > 0
